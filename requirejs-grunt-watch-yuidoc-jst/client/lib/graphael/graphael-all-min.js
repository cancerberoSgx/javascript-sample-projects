
/* g.raphael */

/*!
 * g.Raphael 0.51 - Charting library, based on Raphaël
 *
 * Copyright (c) 2009-2012 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
Raphael.el.popup=function(d,k,h,g){var c=this.paper||this[0].paper,f,j,b,e,a;if(!c){return}switch(this.type){case"text":case"circle":case"ellipse":b=true;break;default:b=false}d=d==null?"up":d;k=k||5;f=this.getBBox();h=typeof h=="number"?h:(b?f.x+f.width/2:f.x);g=typeof g=="number"?g:(b?f.y+f.height/2:f.y);e=Math.max(f.width/2-k,0);a=Math.max(f.height/2-k,0);this.translate(h-f.x-(b?f.width/2:0),g-f.y-(b?f.height/2:0));f=this.getBBox();var i={up:["M",h,g,"l",-k,-k,-e,0,"a",k,k,0,0,1,-k,-k,"l",0,-f.height,"a",k,k,0,0,1,k,-k,"l",k*2+e*2,0,"a",k,k,0,0,1,k,k,"l",0,f.height,"a",k,k,0,0,1,-k,k,"l",-e,0,"z"].join(","),down:["M",h,g,"l",k,k,e,0,"a",k,k,0,0,1,k,k,"l",0,f.height,"a",k,k,0,0,1,-k,k,"l",-(k*2+e*2),0,"a",k,k,0,0,1,-k,-k,"l",0,-f.height,"a",k,k,0,0,1,k,-k,"l",e,0,"z"].join(","),left:["M",h,g,"l",-k,k,0,a,"a",k,k,0,0,1,-k,k,"l",-f.width,0,"a",k,k,0,0,1,-k,-k,"l",0,-(k*2+a*2),"a",k,k,0,0,1,k,-k,"l",f.width,0,"a",k,k,0,0,1,k,k,"l",0,a,"z"].join(","),right:["M",h,g,"l",k,-k,0,-a,"a",k,k,0,0,1,k,-k,"l",f.width,0,"a",k,k,0,0,1,k,k,"l",0,k*2+a*2,"a",k,k,0,0,1,-k,k,"l",-f.width,0,"a",k,k,0,0,1,-k,-k,"l",0,-a,"z"].join(",")};j={up:{x:-!b*(f.width/2),y:-k*2-(b?f.height/2:f.height)},down:{x:-!b*(f.width/2),y:k*2+(b?f.height/2:f.height)},left:{x:-k*2-(b?f.width/2:f.width),y:-!b*(f.height/2)},right:{x:k*2+(b?f.width/2:f.width),y:-!b*(f.height/2)}}[d];this.translate(j.x,j.y);return c.path(i[d]).attr({fill:"#000",stroke:"none"}).insertBefore(this.node?this:this[0])};Raphael.el.tag=function(f,b,l,k){var i=3,e=this.paper||this[0].paper;if(!e){return}var c=e.path().attr({fill:"#000",stroke:"#000"}),j=this.getBBox(),m,h,a,g;switch(this.type){case"text":case"circle":case"ellipse":a=true;break;default:a=false}f=f||0;l=typeof l=="number"?l:(a?j.x+j.width/2:j.x);k=typeof k=="number"?k:(a?j.y+j.height/2:j.y);b=b==null?5:b;h=0.5522*b;if(j.height>=b*2){c.attr({path:["M",l,k+b,"a",b,b,0,1,1,0,-b*2,b,b,0,1,1,0,b*2,"m",0,-b*2-i,"a",b+i,b+i,0,1,0,0,(b+i)*2,"L",l+b+i,k+j.height/2+i,"l",j.width+2*i,0,0,-j.height-2*i,-j.width-2*i,0,"L",l,k-b-i].join(",")})}else{m=Math.sqrt(Math.pow(b+i,2)-Math.pow(j.height/2+i,2));c.attr({path:["M",l,k+b,"c",-h,0,-b,h-b,-b,-b,0,-h,b-h,-b,b,-b,h,0,b,b-h,b,b,0,h,h-b,b,-b,b,"M",l+m,k-j.height/2-i,"a",b+i,b+i,0,1,0,0,j.height+2*i,"l",b+i-m+j.width+2*i,0,0,-j.height-2*i,"L",l+m,k-j.height/2-i].join(",")})}f=360-f;c.rotate(f,l,k);if(this.attrs){this.attr(this.attrs.x?"x":"cx",l+b+i+(!a?this.type=="text"?j.width:0:j.width/2)).attr("y",a?k:k-j.height/2);this.rotate(f,l,k);f>90&&f<270&&this.attr(this.attrs.x?"x":"cx",l-b-i-(!a?j.width:j.width/2)).rotate(180,l,k)}else{if(f>90&&f<270){this.translate(l-j.x-j.width-b-i,k-j.y-j.height/2);this.rotate(f-180,j.x+j.width+b+i,j.y+j.height/2)}else{this.translate(l-j.x+b+i,k-j.y-j.height/2);this.rotate(f,j.x-b-i,j.y+j.height/2)}}return c.insertBefore(this.node?this:this[0])};Raphael.el.drop=function(d,g,f){var e=this.getBBox(),c=this.paper||this[0].paper,a,j,b,i,h;if(!c){return}switch(this.type){case"text":case"circle":case"ellipse":a=true;break;default:a=false}d=d||0;g=typeof g=="number"?g:(a?e.x+e.width/2:e.x);f=typeof f=="number"?f:(a?e.y+e.height/2:e.y);j=Math.max(e.width,e.height)+Math.min(e.width,e.height);b=c.path(["M",g,f,"l",j,0,"A",j*0.4,j*0.4,0,1,0,g+j*0.7,f-j*0.7,"z"]).attr({fill:"#000",stroke:"none"}).rotate(22.5-d,g,f);d=(d+90)*Math.PI/180;i=(g+j*Math.sin(d))-(a?0:e.width/2);h=(f+j*Math.cos(d))-(a?0:e.height/2);this.attrs?this.attr(this.attrs.x?"x":"cx",i).attr(this.attrs.y?"y":"cy",h):this.translate(i-e.x,h-e.y);return b.insertBefore(this.node?this:this[0])};Raphael.el.flag=function(e,k,j){var g=3,c=this.paper||this[0].paper;if(!c){return}var b=c.path().attr({fill:"#000",stroke:"#000"}),i=this.getBBox(),f=i.height/2,a;switch(this.type){case"text":case"circle":case"ellipse":a=true;break;default:a=false}e=e||0;k=typeof k=="number"?k:(a?i.x+i.width/2:i.x);j=typeof j=="number"?j:(a?i.y+i.height/2:i.y);b.attr({path:["M",k,j,"l",f+g,-f-g,i.width+2*g,0,0,i.height+2*g,-i.width-2*g,0,"z"].join(",")});e=360-e;b.rotate(e,k,j);if(this.attrs){this.attr(this.attrs.x?"x":"cx",k+f+g+(!a?this.type=="text"?i.width:0:i.width/2)).attr("y",a?j:j-i.height/2);this.rotate(e,k,j);e>90&&e<270&&this.attr(this.attrs.x?"x":"cx",k-f-g-(!a?i.width:i.width/2)).rotate(180,k,j)}else{if(e>90&&e<270){this.translate(k-i.x-i.width-f-g,j-i.y-i.height/2);this.rotate(e-180,i.x+i.width+f+g,i.y+i.height/2)}else{this.translate(k-i.x+f+g,j-i.y-i.height/2);this.rotate(e,i.x-f-g,i.y+i.height/2)}}return b.insertBefore(this.node?this:this[0])};Raphael.el.label=function(){var c=this.getBBox(),b=this.paper||this[0].paper,a=Math.min(20,c.width+10,c.height+10)/2;if(!b){return}return b.rect(c.x-a/2,c.y-a/2,c.width+a,c.height+a,a).attr({stroke:"none",fill:"#000"}).insertBefore(this.node?this:this[0])};Raphael.el.blob=function(z,j,i){var g=this.getBBox(),B=Math.PI/180,n=this.paper||this[0].paper,r,A,q;if(!n){return}switch(this.type){case"text":case"circle":case"ellipse":A=true;break;default:A=false}r=n.path().attr({fill:"#000",stroke:"none"});z=(+z+1?z:45)+90;q=Math.min(g.height,g.width);j=typeof j=="number"?j:(A?g.x+g.width/2:g.x);i=typeof i=="number"?i:(A?g.y+g.height/2:g.y);var m=Math.max(g.width+q,q*25/12),t=Math.max(g.height+q,q*25/12),u=j+q*Math.sin((z-22.5)*B),b=i+q*Math.cos((z-22.5)*B),v=j+q*Math.sin((z+22.5)*B),d=i+q*Math.cos((z+22.5)*B),o=(v-u)/2,l=(d-b)/2,f=m/2,e=t/2,s=-Math.sqrt(Math.abs(f*f*e*e-f*f*l*l-e*e*o*o)/(f*f*l*l+e*e*o*o)),c=s*f*l/e+(v+u)/2,a=s*-e*o/f+(d+b)/2;r.attr({x:c,y:a,path:["M",j,i,"L",v,d,"A",f,e,0,1,1,u,b,"z"].join(",")});this.translate(c-g.x-g.width/2,a-g.y-g.height/2);return r.insertBefore(this.node?this:this[0])};Raphael.fn.label=function(a,d,b){var c=this.set();b=this.text(a,d,b).attr(Raphael.g.txtattr);return c.push(b.label(),b)};Raphael.fn.popup=function(a,f,d,b,c){var e=this.set();d=this.text(a,f,d).attr(Raphael.g.txtattr);return e.push(d.popup(b,c,a,f),d)};Raphael.fn.tag=function(a,f,d,c,b){var e=this.set();d=this.text(a,f,d).attr(Raphael.g.txtattr);return e.push(d.tag(c,b),d)};Raphael.fn.flag=function(a,e,c,b){var d=this.set();c=this.text(a,e,c).attr(Raphael.g.txtattr);return d.push(c.flag(b),c)};Raphael.fn.drop=function(a,e,c,b){var d=this.set();c=this.text(a,e,c).attr(Raphael.g.txtattr);return d.push(c.drop(b),c)};Raphael.fn.blob=function(a,e,c,b){var d=this.set();c=this.text(a,e,c).attr(Raphael.g.txtattr);return d.push(c.blob(b),c)};Raphael.el.lighter=function(b){b=b||2;var a=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[a[0],a[1]];a[0]=Raphael.rgb2hsb(Raphael.getRGB(a[0]).hex);a[1]=Raphael.rgb2hsb(Raphael.getRGB(a[1]).hex);a[0].b=Math.min(a[0].b*b,1);a[0].s=a[0].s/b;a[1].b=Math.min(a[1].b*b,1);a[1].s=a[1].s/b;this.attr({fill:"hsb("+[a[0].h,a[0].s,a[0].b]+")",stroke:"hsb("+[a[1].h,a[1].s,a[1].b]+")"});return this};Raphael.el.darker=function(b){b=b||2;var a=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[a[0],a[1]];a[0]=Raphael.rgb2hsb(Raphael.getRGB(a[0]).hex);a[1]=Raphael.rgb2hsb(Raphael.getRGB(a[1]).hex);a[0].s=Math.min(a[0].s*b,1);a[0].b=a[0].b/b;a[1].s=Math.min(a[1].s*b,1);a[1].b=a[1].b/b;this.attr({fill:"hsb("+[a[0].h,a[0].s,a[0].b]+")",stroke:"hsb("+[a[1].h,a[1].s,a[1].b]+")"});return this};Raphael.el.resetBrightness=function(){if(this.fs){this.attr({fill:this.fs[0],stroke:this.fs[1]});delete this.fs}return this};(function(){var c=["lighter","darker","resetBrightness"],a=["popup","tag","flag","label","drop","blob"];for(var b in a){(function(d){Raphael.st[d]=function(){return Raphael.el[d].apply(this,arguments)}})(a[b])}for(var b in c){(function(d){Raphael.st[d]=function(){for(var e=0;e<this.length;e++){this[e][d].apply(this[e],arguments)}return this}})(c[b])}})();Raphael.g={shim:{stroke:"none",fill:"#000","fill-opacity":0},txtattr:{font:"12px Arial, sans-serif",fill:"#fff"},colors:(function(){var c=[0.6,0.2,0.05,0.1333,0.75,0],a=[];for(var b=0;b<10;b++){if(b<c.length){a.push("hsb("+c[b]+",.75, .75)")}else{a.push("hsb("+c[b-c.length]+", 1, .5)")}}return a})(),snapEnds:function(j,k,h){var e=j,l=k;if(e==l){return{from:e,to:l,power:0}}function m(d){return Math.abs(d-0.5)<0.25?~~(d)+0.5:Math.round(d)}var g=(l-e)/h,a=~~(g),c=a,b=0;if(a){while(c){b--;c=~~(g*Math.pow(10,b))/Math.pow(10,b)}b++}else{if(g==0||!isFinite(g)){b=1}else{while(!a){b=b||1;a=~~(g*Math.pow(10,b))/Math.pow(10,b);b++}}b&&b--}l=m(k*Math.pow(10,b))/Math.pow(10,b);if(l<k){l=m((k+0.5)*Math.pow(10,b))/Math.pow(10,b)}e=m((j-(b>0?0:0.5))*Math.pow(10,b))/Math.pow(10,b);return{from:e,to:l,power:b}},axis:function(p,o,k,D,e,G,g,J,h,a,q){a=a==null?2:a;h=h||"t";G=G||10;q=arguments[arguments.length-1];var C=h=="|"||h==" "?["M",p+0.5,o,"l",0,0.001]:g==1||g==3?["M",p+0.5,o,"l",0,-k]:["M",p,o+0.5,"l",k,0],s=this.snapEnds(D,e,G),H=s.from,z=s.to,F=s.power,E=0,w={font:"11px 'Fontin Sans', Fontin-Sans, sans-serif"},v=q.set(),I;I=(z-H)/G;var n=H,m=F>0?F:0;r=k/G;if(+g==1||+g==3){var b=o,u=(g-1?1:-1)*(a+3+!!(g-1));while(b>=o-k){h!="-"&&h!=" "&&(C=C.concat(["M",p-(h=="+"||h=="|"?a:!(g-1)*a*2),b+0.5,"l",a*2+1,0]));v.push(q.text(p+u,b,(J&&J[E++])||(Math.round(n)==n?n:+n.toFixed(m))).attr(w).attr({"text-anchor":g-1?"start":"end"}));n+=I;b-=r}if(Math.round(b+r-(o-k))){h!="-"&&h!=" "&&(C=C.concat(["M",p-(h=="+"||h=="|"?a:!(g-1)*a*2),o-k+0.5,"l",a*2+1,0]));v.push(q.text(p+u,o-k,(J&&J[E])||(Math.round(n)==n?n:+n.toFixed(m))).attr(w).attr({"text-anchor":g-1?"start":"end"}))}}else{n=H;m=(F>0)*F;u=(g?-1:1)*(a+9+!g);var c=p,r=k/G,A=0,B=0;while(c<=p+k){h!="-"&&h!=" "&&(C=C.concat(["M",c+0.5,o-(h=="+"?a:!!g*a*2),"l",0,a*2+1]));v.push(A=q.text(c,o+u,(J&&J[E++])||(Math.round(n)==n?n:+n.toFixed(m))).attr(w));var l=A.getBBox();if(B>=l.x-5){v.pop(v.length-1).remove()}else{B=l.x+l.width}n+=I;c+=r}if(Math.round(c-r-p-k)){h!="-"&&h!=" "&&(C=C.concat(["M",p+k+0.5,o-(h=="+"?a:!!g*a*2),"l",0,a*2+1]));v.push(q.text(p+k,o+u,(J&&J[E])||(Math.round(n)==n?n:+n.toFixed(m))).attr(w))}}var K=q.path(C);K.text=v;K.all=q.set([K,v]);K.remove=function(){this.text.remove();this.constructor.prototype.remove.call(this)};return K},labelise:function(a,c,b){if(a){return(a+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(d,f,e){if(f){return(+c).toFixed(f.replace(/^#+\.?/g,"").length)}if(e){return(c*100/b).toFixed(e.replace(/^%+\.?/g,"").length)+"%"}})}else{return(+c).toFixed(0)}}};
/* g.bar */

/*!
 * g.Raphael 0.51 - Charting library, based on Raphaël
 *
 * Copyright (c) 2009-2012 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
(function(){var f=Math.min,a=Math.max;function e(o,m,h,p,j,k,l,i){var s,n={round:"round",sharp:"sharp",soft:"soft",square:"square"};if((j&&!p)||(!j&&!h)){return l?"":i.path()}k=n[k]||"square";p=Math.round(p);h=Math.round(h);o=Math.round(o);m=Math.round(m);switch(k){case"round":if(!j){var g=~~(p/2);if(h<g){g=h;s=["M",o+0.5,m+0.5-~~(p/2),"l",0,0,"a",g,~~(p/2),0,0,1,0,p,"l",0,0,"z"]}else{s=["M",o+0.5,m+0.5-g,"l",h-g,0,"a",g,g,0,1,1,0,p,"l",g-h,0,"z"]}}else{g=~~(h/2);if(p<g){g=p;s=["M",o-~~(h/2),m,"l",0,0,"a",~~(h/2),g,0,0,1,h,0,"l",0,0,"z"]}else{s=["M",o-g,m,"l",0,g-p,"a",g,g,0,1,1,h,0,"l",0,p-g,"z"]}}break;case"sharp":if(!j){var q=~~(p/2);s=["M",o,m+q,"l",0,-p,a(h-q,0),0,f(q,h),q,-f(q,h),q+(q*2<p),"z"]}else{q=~~(h/2);s=["M",o+q,m,"l",-h,0,0,-a(p-q,0),q,-f(q,p),q,f(q,p),q,"z"]}break;case"square":if(!j){s=["M",o,m+~~(p/2),"l",0,-p,h,0,0,p,"z"]}else{s=["M",o+~~(h/2),m,"l",1-h,0,0,-p,h-1,0,"z"]}break;case"soft":if(!j){g=f(h,Math.round(p/5));s=["M",o+0.5,m+0.5-~~(p/2),"l",h-g,0,"a",g,g,0,0,1,g,g,"l",0,p-g*2,"a",g,g,0,0,1,-g,g,"l",g-h,0,"z"]}else{g=f(Math.round(h/5),p);s=["M",o-~~(h/2),m,"l",0,g-p,"a",g,g,0,0,1,g,-g,"l",h-2*g,0,"a",g,g,0,0,1,g,g,"l",0,p-g,"z"]}}if(l){return s.join(",")}else{return i.path(s)}}function d(l,J,H,g,m,V,D){D=D||{};var z=this,W=D.type||"square",u=parseFloat(D.gutter||"20%"),T=l.set(),E=l.set(),n=l.set(),B=l.set(),F=Math.max.apply(Math,V),U=[],I=0,M=D.colors||z.colors,A=V.length;if(Raphael.is(V[0],"array")){F=[];I=A;A=0;for(var R=V.length;R--;){E.push(l.set());F.push(Math.max.apply(Math,V[R]));A=Math.max(A,V[R].length)}if(D.stacked){for(var R=A;R--;){var r=0;for(var Q=V.length;Q--;){r+=+V[Q][R]||0}U.push(r)}}for(var R=V.length;R--;){if(V[R].length<A){for(var Q=A;Q--;){V[R].push(0)}}}F=Math.max.apply(Math,D.stacked?U:F)}F=(D.to)||F;var K=g/(A*(100+u)+u)*100,k=K*u/100,p=D.vgutter==null?20:D.vgutter,C=[],q=J+k,o=(m-2*p)/F;if(!D.stretch){k=Math.round(k);K=Math.floor(K)}!D.stacked&&(K/=I||1);for(var R=0;R<A;R++){C=[];for(var Q=0;Q<(I||1);Q++){var S=Math.round((I?V[Q][R]:V[R])*o),t=H+m-p-S,O=e(Math.round(q+K/2),t+S,K,S,true,W,null,l).attr({stroke:"none",fill:M[I?Q:R]});if(I){E[Q].push(O)}else{E.push(O)}O.y=t;O.x=Math.round(q+K/2);O.w=K;O.h=S;O.value=I?V[Q][R]:V[R];if(!D.stacked){q+=K}else{C.push(O)}}if(D.stacked){var P;B.push(P=l.rect(C[0].x-C[0].w/2,H,K,m).attr(z.shim));P.bars=l.set();var v=0;for(var L=C.length;L--;){C[L].toFront()}for(var L=0,w=C.length;L<w;L++){var O=C[L],G,S=(v+O.value)*o,N=e(O.x,H+m-p-!!v*0.5,K,S,true,W,1,l);P.bars.push(O);v&&O.attr({path:N});O.h=S;O.y=H+m-p-!!v*0.5-S;n.push(G=l.rect(O.x-O.w/2,O.y,K,O.value*o).attr(z.shim));G.bar=O;G.value=O.value;v+=O.value}q+=K}q+=k}B.toFront();q=J+k;if(!D.stacked){for(var R=0;R<A;R++){for(var Q=0;Q<(I||1);Q++){var G;n.push(G=l.rect(Math.round(q),H+p,K,m-p).attr(z.shim));G.bar=I?E[Q][R]:E[R];G.value=G.bar.value;q+=K}q+=k}}T.label=function(aa){aa=aa||[];this.labels=l.set();var s=this[0];for(var y=0;y<s.length;y++){var Z=s[y],h=[];if(Z){for(var x=0;x<Z.length;x++){var X=Z[x],Y=X.getBBox();h.push(l.label(Y.x,Y.y,aa[y][x]))}}}this.push(this.labels);return this};T.hover=function(i,h){B.hide();n.show();n.mouseover(i).mouseout(h);return this};T.hoverColumn=function(i,h){n.hide();B.show();h=h||function(){};B.mouseover(i).mouseout(h);return this};T.click=function(h){B.hide();n.show();n.click(h);return this};T.each=function(j){if(!Raphael.is(j,"function")){return this}for(var h=n.length;h--;){j.call(n[h])}return this};T.eachColumn=function(j){if(!Raphael.is(j,"function")){return this}for(var h=B.length;h--;){j.call(B[h])}return this};T.clickColumn=function(h){n.hide();B.show();B.click(h);return this};T.push(E,n,B);T.bars=E;T.covers=n;return T}var c=function(){};c.prototype=Raphael.g;b.prototype=d.prototype=new c;Raphael.fn.barchart=function(h,l,j,g,i,k){return new d(this,h,l,j,g,i,k)};function b(w,v,u,I,F,l,B){B=B||{};var h=this,n=B.type||"square",o=parseFloat(B.gutter||"20%"),D=w.set(),H=w.set(),q=w.set(),L=w.set(),T=Math.max.apply(Math,l),g=[],J=0,t=B.colors||h.colors,O=l.length;if(Raphael.is(l[0],"array")){T=[];J=O;O=0;for(var N=l.length;N--;){H.push(w.set());T.push(Math.max.apply(Math,l[N]));O=Math.max(O,l[N].length)}if(B.stacked){for(var N=O;N--;){var z=0;for(var M=l.length;M--;){z+=+l[M][N]||0}g.push(z)}}for(var N=l.length;N--;){if(l[N].length<O){for(var M=O;M--;){l[N].push(0)}}}T=Math.max.apply(Math,B.stacked?g:T)}T=(B.to)||T;var Q=Math.floor(F/(O*(100+o)+o)*100),r=Math.floor(Q*o/100),p=[],k=u+r,m=(I-1)/T;!B.stacked&&(Q/=J||1);for(var N=0;N<O;N++){p=[];for(var M=0;M<(J||1);M++){var S=J?l[M][N]:l[N],P=e(v,k+Q/2,Math.round(S*m),Q-1,false,n,null,w).attr({stroke:"none",fill:t[J?M:N]});if(J){H[M].push(P)}else{H.push(P)}P.x=v+Math.round(S*m);P.y=k+Q/2;P.w=Math.round(S*m);P.h=Q;P.value=+S;if(!B.stacked){k+=Q}else{p.push(P)}}if(B.stacked){var A=w.rect(v,p[0].y-p[0].h/2,I,Q).attr(h.shim);L.push(A);A.bars=w.set();var E=0;for(var C=p.length;C--;){p[C].toFront()}for(var C=0,K=p.length;C<K;C++){var P=p[C],R,S=Math.round((E+P.value)*m),G=e(v,P.y,S,Q-1,false,n,1,w);A.bars.push(P);E&&P.attr({path:G});P.w=S;P.x=v+S;q.push(R=w.rect(v+E*m,P.y-P.h/2,P.value*m,Q).attr(h.shim));R.bar=P;E+=P.value}k+=Q}k+=r}L.toFront();k=u+r;if(!B.stacked){for(var N=0;N<O;N++){for(var M=0;M<(J||1);M++){var R=w.rect(v,k,I,Q).attr(h.shim);q.push(R);R.bar=J?H[M][N]:H[N];R.value=R.bar.value;k+=Q}k+=r}}D.label=function(Z,W){Z=Z||[];this.labels=w.set();for(var V=0;V<O;V++){for(var U=0;U<J;U++){var y=w.labelise(J?Z[U]&&Z[U][V]:Z[V],J?l[U][V]:l[V],T),Y=W?H[V*(J||1)+U].x-Q/2+3:v+5,x=W?"end":"start",s;this.labels.push(s=w.text(Y,H[V*(J||1)+U].y,y).attr(txtattr).attr({"text-anchor":x}).insertBefore(q[0]));if(s.getBBox().x<v+5){s.attr({x:v+5,"text-anchor":"start"})}else{H[V*(J||1)+U].label=s}}}return this};D.hover=function(j,i){L.hide();q.show();i=i||function(){};q.mouseover(j).mouseout(i);return this};D.hoverColumn=function(j,i){q.hide();L.show();i=i||function(){};L.mouseover(j).mouseout(i);return this};D.each=function(s){if(!Raphael.is(s,"function")){return this}for(var j=q.length;j--;){s.call(q[j])}return this};D.eachColumn=function(s){if(!Raphael.is(s,"function")){return this}for(var j=L.length;j--;){s.call(L[j])}return this};D.click=function(i){L.hide();q.show();q.click(i);return this};D.clickColumn=function(i){q.hide();L.show();L.click(i);return this};D.push(H,q,L);D.bars=H;D.covers=q;return D}Raphael.fn.hbarchart=function(h,l,j,g,i,k){return new b(this,h,l,j,g,i,k)}})();
/* g.dot */

/*!
 * g.Raphael 0.51 - Charting library, based on Raphaël
 *
 * Copyright (c) 2009-2012 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
(function(){var b=function(g,f,e,d){return"hsb("+[Math.min((1-g/f)*0.4,1),e||0.75,d||0.75]+")"};function a(e,N,M,d,j,B,A,t,I){function U(g){+g[0]&&(g[0]=v.axis(N+s,M+s,d-2*s,E,p,I.axisxstep||Math.floor((d-2*s)/20),2,I.axisxlabels||null,I.axisxtype||"t",null,e));+g[1]&&(g[1]=v.axis(N+d-s,M+j-s,j-2*s,D,o,I.axisystep||Math.floor((j-2*s)/20),3,I.axisylabels||null,I.axisytype||"t",null,e));+g[2]&&(g[2]=v.axis(N+s,M+j-s+H,d-2*s,E,p,I.axisxstep||Math.floor((d-2*s)/20),0,I.axisxlabels||null,I.axisxtype||"t",null,e));+g[3]&&(g[3]=v.axis(N+s-H,M+j-s,j-2*s,D,o,I.axisystep||Math.floor((j-2*s)/20),1,I.axisylabels||null,I.axisytype||"t",null,e))}I=I||{};var v=this;var z=v.snapEnds(Math.min.apply(Math,B),Math.max.apply(Math,B),B.length-1),E=z.from,p=z.to,s=I.gutter||10,L=v.snapEnds(Math.min.apply(Math,A),Math.max.apply(Math,A),A.length-1),D=L.from,o=L.to,C=Math.max(B.length,A.length,t.length),w=e[I.symbol]||"circle",J=e.set(),u=e.set(),G=I.max||100,r=Math.max.apply(Math,t),q=[],Q=Math.sqrt(r/Math.PI)*2/G;for(var S=0;S<C;S++){q[S]=Math.min(Math.sqrt(t[S]/Math.PI)*2/Q,G)}s=Math.max.apply(Math,q.concat(s));var F=e.set(),H=Math.max.apply(Math,q);if(I.axis){var n=(I.axis+"").split(/[,\s]+/);U.call(v,n);var T=[],V=[];for(var S=0,K=n.length;S<K;S++){var W=n[S].all?n[S].all.getBBox()[["height","width"][S%2]]:0;T[S]=W+s;V[S]=W}s=Math.max.apply(Math,T.concat(s));for(var S=0,K=n.length;S<K;S++){if(n[S].all){n[S].remove();n[S]=1}}U.call(v,n);for(var S=0,K=n.length;S<K;S++){if(n[S].all){F.push(n[S].all)}}J.axis=F}var P=(d-s*2)/((p-E)||1),O=(j-s*2)/((o-D)||1);for(var S=0,K=A.length;S<K;S++){var h=e.raphael.is(w,"array")?w[S]:w,m=N+s+(B[S]-E)*P,l=M+j-s-(A[S]-D)*O;h&&q[S]&&u.push(e[h](m,l,q[S]).attr({fill:I.heat?b(q[S],H):v.colors[0],"fill-opacity":I.opacity?q[S]/G:1,stroke:"none"}))}var f=e.set();for(var S=0,K=A.length;S<K;S++){var m=N+s+(B[S]-E)*P,l=M+j-s-(A[S]-D)*O;f.push(e.circle(m,l,H).attr(v.shim));I.href&&I.href[S]&&f[S].attr({href:I.href[S]});f[S].r=+q[S].toFixed(3);f[S].x=+m.toFixed(3);f[S].y=+l.toFixed(3);f[S].X=B[S];f[S].Y=A[S];f[S].value=t[S]||0;f[S].dot=u[S]}J.covers=f;J.series=u;J.push(u,F,f);J.hover=function(i,g){f.mouseover(i).mouseout(g);return this};J.click=function(g){f.click(g);return this};J.each=function(k){if(!e.raphael.is(k,"function")){return this}for(var g=f.length;g--;){k.call(f[g])}return this};J.href=function(x){var k;for(var g=f.length;g--;){k=f[g];if(k.X==x.x&&k.Y==x.y&&k.value==x.value){k.attr({href:x.href})}}};return J}var c=function(){};c.prototype=Raphael.g;a.prototype=new c;Raphael.fn.dotchart=function(e,k,g,d,j,i,f,h){return new a(this,e,k,g,d,j,i,f,h)}})();
/* g.line */

/*!
 * g.Raphael 0.51 - Charting library, based on Raphaël
 *
 * Copyright (c) 2009-2012 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
(function(){function a(g,n){var f=g.length/n,h=0,e=f,m=0,i=[];while(h<g.length){e--;if(e<0){m+=g[h]*(1+e);i.push(m/f);m=g[h++]*-e;e+=f}else{m+=g[h++]*1}}return i}function d(f,e,p,n,k,j){var h=(p-f)/2,g=(k-p)/2,q=Math.atan((p-f)/Math.abs(n-e)),o=Math.atan((k-p)/Math.abs(n-j));q=e<n?Math.PI-q:q;o=j<n?Math.PI-o:o;var i=Math.PI/2-((q+o)%(Math.PI*2))/2,s=h*Math.sin(i+q),m=h*Math.cos(i+q),r=g*Math.sin(i+o),l=g*Math.cos(i+o);return{x1:p-s,y1:n+m,x2:p+r,y2:n+l}}function b(f,P,O,e,h,A,z,J){var s=this;J=J||{};if(!f.raphael.is(A[0],"array")){A=[A]}if(!f.raphael.is(z[0],"array")){z=[z]}var q=J.gutter||10,B=Math.max(A[0].length,z[0].length),t=J.symbol||"",S=J.colors||s.colors,v=null,p=null,ad=f.set(),T=[];for(var ac=0,L=z.length;ac<L;ac++){B=Math.max(B,z[ac].length)}var ae=f.set();for(ac=0,L=z.length;ac<L;ac++){if(J.shade){ae.push(f.path().attr({stroke:"none",fill:S[ac],opacity:J.nostroke?1:0.3}))}if(z[ac].length>e-2*q){z[ac]=a(z[ac],e-2*q);B=e-2*q}if(A[ac]&&A[ac].length>e-2*q){A[ac]=a(A[ac],e-2*q)}}var W=Array.prototype.concat.apply([],A),U=Array.prototype.concat.apply([],z),u=s.snapEnds(Math.min.apply(Math,W),Math.max.apply(Math,W),A[0].length-1),E=u.from,o=u.to,N=s.snapEnds(Math.min.apply(Math,U),Math.max.apply(Math,U),z[0].length-1),C=N.from,n=N.to,Z=(e-q*2)/((o-E)||1),V=(h-q*2)/((n-C)||1);var G=f.set();if(J.axis){var m=(J.axis+"").split(/[,\s]+/);+m[0]&&G.push(s.axis(P+q,O+q,e-2*q,E,o,J.axisxstep||Math.floor((e-2*q)/20),2,f));+m[1]&&G.push(s.axis(P+e-q,O+h-q,h-2*q,C,n,J.axisystep||Math.floor((h-2*q)/20),3,f));+m[2]&&G.push(s.axis(P+q,O+h-q,e-2*q,E,o,J.axisxstep||Math.floor((e-2*q)/20),0,f));+m[3]&&G.push(s.axis(P+q,O+h-q,h-2*q,C,n,J.axisystep||Math.floor((h-2*q)/20),1,f))}var M=f.set(),aa=f.set(),r;for(ac=0,L=z.length;ac<L;ac++){if(!J.nostroke){M.push(r=f.path().attr({stroke:S[ac],"stroke-width":J.width||2,"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":J.dash||""}))}var g=Raphael.is(t,"array")?t[ac]:t,H=f.set();T=[];for(var ab=0,w=z[ac].length;ab<w;ab++){var l=P+q+((A[ac]||A[0])[ab]-E)*Z,k=O+h-q-(z[ac][ab]-C)*V;(Raphael.is(g,"array")?g[ab]:g)&&H.push(f[Raphael.is(g,"array")?g[ab]:g](l,k,(J.width||2)*3).attr({fill:S[ac],stroke:"none"}));if(J.smooth){if(ab&&ab!=w-1){var R=P+q+((A[ac]||A[0])[ab-1]-E)*Z,F=O+h-q-(z[ac][ab-1]-C)*V,Q=P+q+((A[ac]||A[0])[ab+1]-E)*Z,D=O+h-q-(z[ac][ab+1]-C)*V,af=d(R,F,l,k,Q,D);T=T.concat([af.x1,af.y1,l,k,af.x2,af.y2])}if(!ab){T=["M",l,k,"C",l,k]}}else{T=T.concat([ab?"L":"M",l,k])}}if(J.smooth){T=T.concat([l,k,l,k])}aa.push(H);if(J.shade){ae[ac].attr({path:T.concat(["L",l,O+h-q,"L",P+q+((A[ac]||A[0])[0]-E)*Z,O+h-q,"z"]).join(",")})}!J.nostroke&&r.attr({path:T.join(",")})}function K(an){var ak=[];for(var al=0,ap=A.length;al<ap;al++){ak=ak.concat(A[al])}ak.sort(function(j,i){return j-i});var aq=[],ah=[];for(al=0,ap=ak.length;al<ap;al++){ak[al]!=ak[al-1]&&aq.push(ak[al])&&ah.push(P+q+(ak[al]-E)*Z)}ak=aq;ap=ak.length;var ag=an||f.set();for(al=0;al<ap;al++){var Y=ah[al]-(ah[al]-(ah[al-1]||P))/2,ao=((ah[al+1]||P+e)-ah[al])/2+(ah[al]-(ah[al-1]||P))/2,x;an?(x={}):ag.push(x=f.rect(Y-1,O,Math.max(ao+1,1),h).attr({stroke:"none",fill:"#000",opacity:0}));x.values=[];x.symbols=f.set();x.y=[];x.x=ah[al];x.axis=ak[al];for(var aj=0,am=z.length;aj<am;aj++){aq=A[aj]||A[0];for(var ai=0,y=aq.length;ai<y;ai++){if(aq[ai]==ak[al]){x.values.push(z[aj][ai]);x.y.push(O+h-q-(z[aj][ai]-C)*V);x.symbols.push(ad.symbols[aj][ai])}}}an&&an.call(x)}!an&&(v=ag)}function I(al){var ah=al||f.set(),x;for(var aj=0,an=z.length;aj<an;aj++){for(var ai=0,ak=z[aj].length;ai<ak;ai++){var ag=P+q+((A[aj]||A[0])[ai]-E)*Z,am=P+q+((A[aj]||A[0])[ai?ai-1:1]-E)*Z,y=O+h-q-(z[aj][ai]-C)*V;al?(x={}):ah.push(x=f.circle(ag,y,Math.abs(am-ag)/2).attr({stroke:"#000",fill:"#000",opacity:1}));x.x=ag;x.y=y;x.value=z[aj][ai];x.line=ad.lines[aj];x.shade=ad.shades[aj];x.symbol=ad.symbols[aj][ai];x.symbols=ad.symbols[aj];x.axis=(A[aj]||A[0])[ai];al&&al.call(x)}}!al&&(p=ah)}ad.push(M,ae,aa,G,v,p);ad.lines=M;ad.shades=ae;ad.symbols=aa;ad.axis=G;ad.hoverColumn=function(j,i){!v&&K();v.mouseover(j).mouseout(i);return this};ad.clickColumn=function(i){!v&&K();v.click(i);return this};ad.hrefColumn=function(Y){var ag=f.raphael.is(arguments[0],"array")?arguments[0]:arguments;if(!(arguments.length-1)&&typeof Y=="object"){for(var j in Y){for(var y=0,X=v.length;y<X;y++){if(v[y].axis==j){v[y].attr("href",Y[j])}}}}!v&&K();for(y=0,X=ag.length;y<X;y++){v[y]&&v[y].attr("href",ag[y])}return this};ad.hover=function(j,i){!p&&I();p.mouseover(j).mouseout(i);return this};ad.click=function(i){!p&&I();p.click(i);return this};ad.each=function(i){I(i);return this};ad.eachColumn=function(i){K(i);return this};return ad}var c=function(){};c.prototype=Raphael.g;b.prototype=new c;Raphael.fn.linechart=function(f,k,g,e,j,i,h){return new b(this,f,k,g,e,j,i,h)}})();
/* g.pie */

/*!
 * g.Raphael 0.51 - Charting library, based on Raphaël
 *
 * Copyright (c) 2009-2012 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
(function(){function b(o,h,g,u,e,q){q=q||{};var c=this,s=[],l=o.set(),t=o.set(),n=o.set(),A=[],C=e.length,D=0,G=0,F=0,f=q.maxSlices||100,x=parseFloat(q.minPercent)||1,E=Boolean(x);function y(K,J,i,M,I,R){var O=Math.PI/180,p=K+i*Math.cos(-M*O),j=K+i*Math.cos(-I*O),L=K+i/2*Math.cos(-(M+(I-M)/2)*O),Q=J+i*Math.sin(-M*O),P=J+i*Math.sin(-I*O),H=J+i/2*Math.sin(-(M+(I-M)/2)*O),N=["M",K,J,"L",p,Q,"A",i,i,0,+(Math.abs(I-M)>180),1,j,P,"z"];N.middle={x:L,y:H};return N}t.covers=l;if(C==1){n.push(o.circle(h,g,u).attr({fill:q.colors&&q.colors[0]||c.colors[0],stroke:q.stroke||"#fff","stroke-width":q.strokewidth==null?1:q.strokewidth}));l.push(o.circle(h,g,u).attr(c.shim));G=e[0];e[0]={value:e[0],order:0,valueOf:function(){return this.value}};q.href&&q.href[0]&&l[0].attr({href:q.href[0]});n[0].middle={x:h,y:g};n[0].mangle=180}else{for(var B=0;B<C;B++){G+=e[B];e[B]={value:e[B],order:B,valueOf:function(){return this.value}}}e.sort(function(j,i){return i.value-j.value});for(B=0;B<C;B++){if(E&&e[B]*100/G<x){f=B;E=false}if(B>f){E=false;e[f].value+=e[B];e[f].others=true;F=e[f].value}}C=Math.min(f+1,e.length);F&&e.splice(C)&&(e[f].others=true);for(B=0;B<C;B++){var k=D-360*e[B]/G/2;if(!B){D=90-k;k=D-360*e[B]/G/2}if(q.init){var m=y(h,g,1,D,D-360*e[B]/G).join(",")}var w=y(h,g,u,D,D-=360*e[B]/G);var z=(q.matchColors&&q.matchColors==true)?e[B].order:B;var v=o.path(q.init?m:w).attr({fill:q.colors&&q.colors[z]||c.colors[z]||"#666",stroke:q.stroke||"#fff","stroke-width":(q.strokewidth==null?1:q.strokewidth),"stroke-linejoin":"round"});v.value=e[B];v.middle=w.middle;v.mangle=k;s.push(v);n.push(v);q.init&&v.animate({path:w.join(",")},(+q.init-1)||1000,">")}for(B=0;B<C;B++){v=o.path(s[B].attr("path")).attr(c.shim);var z=e[B].order;q.href&&q.href[z]&&v.attr({href:q.href[z]});v.attr=function(){};l.push(v);n.push(v)}}t.hover=function(H,p){p=p||function(){};var r=this;for(var j=0;j<C;j++){(function(I,J,i){var K={sector:I,cover:J,cx:h,cy:g,mx:I.middle.x,my:I.middle.y,mangle:I.mangle,r:u,value:e[i],total:G,label:r.labels&&r.labels[i]};J.mouseover(function(){H.call(K)}).mouseout(function(){p.call(K)})})(n[j],l[j],j)}return this};t.each=function(r){var p=this;for(var j=0;j<C;j++){(function(H,I,i){var J={sector:H,cover:I,cx:h,cy:g,x:H.middle.x,y:H.middle.y,mangle:H.mangle,r:u,value:e[i],total:G,label:p.labels&&p.labels[i]};r.call(J)})(n[j],l[j],j)}return this};t.click=function(r){var p=this;for(var j=0;j<C;j++){(function(H,I,i){var J={sector:H,cover:I,cx:h,cy:g,mx:H.middle.x,my:H.middle.y,mangle:H.mangle,r:u,value:e[i],total:G,label:p.labels&&p.labels[i]};I.click(function(){r.call(J)})})(n[j],l[j],j)}return this};t.inject=function(i){i.insertBefore(l[0])};var d=function(M,H,r,p){var Q=h+u+u/5,P=g,L=P+10;M=M||[];p=(p&&p.toLowerCase&&p.toLowerCase())||"east";r=o[r&&r.toLowerCase()]||"circle";t.labels=o.set();for(var K=0;K<C;K++){var R=n[K].attr("fill"),I=e[K].order,J;e[K].others&&(M[I]=H||"Others");M[I]=c.labelise(M[I],e[K],G);t.labels.push(o.set());t.labels[K].push(o[r](Q+5,L,5).attr({fill:R,stroke:"none"}));t.labels[K].push(J=o.text(Q+20,L,M[I]||e[I]).attr(c.txtattr).attr({fill:q.legendcolor||"#000","text-anchor":"start"}));l[K].label=t.labels[K];L+=J.getBBox().height*1.2}var N=t.labels.getBBox(),O={east:[0,-N.height/2],west:[-N.width-2*u-20,-N.height/2],north:[-u-N.width/2,-u-N.height-10],south:[-u-N.width/2,u+10]}[p];t.labels.translate.apply(t.labels,O);t.push(t.labels)};if(q.legend){d(q.legend,q.legendothers,q.legendmark,q.legendpos)}t.push(n,l);t.series=n;t.covers=l;return t}var a=function(){};a.prototype=Raphael.g;b.prototype=new a;Raphael.fn.piechart=function(c,g,f,d,e){return new b(this,c,g,f,d,e)}})();
/* g.sunburst */

/*!
 * g.sunburst 0.1 - Sunburst diagrams
 * Needs g.Raphael 0.4.1 - Charting library, based on Raphaël
 *
 * Copyright (c)2011 zynamics GmbH (http://zynamics.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * license.
 * 
 * 
 * See http://vis.stanford.edu/protovis/ex/sunburst.html for more
information. Rendering is done much the same way.

Use like this (include g.raphael.js and g.sunburst.js):

var r = Raphael("area");
var clusters = {
    "Cluster A": 50,
    "Cluster B": {
        "Sub-Cluster B-A": 25,
        "Sub-Cluster B-B": 75,
    }
    "Cluster C": {
        "Sub-Cluster C-A": 86,
        "Sub-Cluster C-B": 23,
        "Sub-Cluster C-C": {
            "Depth 3 - A": 50,
            "Depth 3 - B": 125
            WithoutQuotes: 14
        }
    }
};

sunburst = r.g.sunburst(350, 350, clusters, {
    rootLabel: "clusters",
    offsetAngle: 90,
    // With of each "ring"
    levelWidths: [25, 75, 50, 40, 30],
    // Colors array, by default used per slice
    colors: ["#E8420C", "#FF9600", "#FF0057", "#A90CE8", "#1D0DFF"],
    // You can also specify gradients instead of colors
    //gradients: ["45-#E8420C-#E832FF", "45-#FF9600-#FF96FF"),
    //    "45-#FF0057-#FF00FF", "45-#A90CE8-#A90CFF",
    //    "45-#1D0DFF-#1D0DFF"],
    // Draw each level in a different color
    //colorizeByLevel: true,
    // Gradient function, this needs the color array;
    // will likey be replaced by an eachSector() function
    onGradient: function(rootSect, depth) {
        return shadeColor(this.colors[rootSect % this.colors.length],
            0.1 * (depth + 2));
    },
    stroke: "#fff",
    strokewidth: 1
});

The diagram also supports the hover and the click event.

 *
 * Author: Christian Blichmann <christian.blichmann@zynamics.com>
 * acomodated by sgurin for raphael 2.1 and raphael4gwt.
 */
Raphael.fn.sunburst=function(h,g,o,a){a=a||{};var d=this,n=this.set(),l=this.set(),b=[];function i(s){if(b[s]){return b[s]}var p=a.onLevelWidth||function(t){return this.levelWidths?this.levelWidths[t]:(this.levelWidth||50)},r=0;for(var q=0;q<=s;q++){r+=p.call(a,q)}b[s]=r;return r}function f(v,u,C,y,I,G,K){var x=G-I,w=Math.abs(x)>=360;if(w){G=I+359.99}var q=Math.abs(x)>180,L=Math.PI/180,t=v+y*Math.cos(-I*L),H=u+y*Math.sin(-I*L),s=v+y*Math.cos(-G*L),F=u+y*Math.sin(-G*L),r=v+C*Math.cos(-I*L),E=u+C*Math.sin(-I*L),p=v+C*Math.cos(-G*L),D=u+C*Math.sin(-G*L),B=Math.abs(G+I)/2,z=(y+C)/2,A=v+z*Math.cos(-B*L),J=u+z*Math.sin(-B*L),M=d.path(["M",r,E,"A",C,C,0,+q,0,p,D,w?"M":"L",s,F,"A",y,y,0,+q,1,t,H,"Z"]);M.middle={x:A,y:J};M.mangle=B;M.ri=C;M.ro=y;return M.attr(K)}function k(p,q){var s={label:p,value:0,children:[]},u=0,t;for(var r in q){if(~~q[r]){s.value+=q[r];t={label:r,value:q[r],depth:0,children:[]}}else{t=k(r,q[r]);s.value+=t.value}u=Math.max(u,t.depth);s.children[s.children.length]=t}s.depth=u+1;return s}function m(p,q){var p=p%(a.colors.length||a.gradients.length);if(a.onGradient){return{gradient:a.onGradient.call(a,p,q)}}return a.gradients?{gradient:a.gradients[p]}:{fill:a.colors?a.colors[p]:Raphael.getColor()}}function e(v,z,q,A,p,B){q=q||0;A=A||v.value;p=p||(a.offsetAngle||0);B=B||0;var y,t=p,s=v.children,r=0;for(var u=0;u<s.length;u++){y=t;t+=s[u].value/A*360;var x=q==0?r:B,w=f(h,g,i(q),i(q+1),y,t,m(!a.colorizeByLevel?x:q,q)).attr({stroke:a.stroke||"#fff","stroke-width":a.strokewidth||1});w.level=q;w.value=s[u].value;w.label=s[u].label;z.push(w);e(s[u],z,q+1,A,y,x);r++}}Raphael.getColor.reset();var j=k(a.rootLabel,o);e(j,l);function c(p){return{sector:p,cx:h,cy:g,mx:p.middle.x,my:p.middle.y,mangle:p.mangle}}n.hover=function(r,q){q=q||function(){};for(var p=0;p<l.length;p++){(function(s){var t=c(s);s.mouseover(function(){r.call(t)});s.mouseout(function(){q.call(t)})})(l[p])}return this};n.click=function(q){for(var p=0;p<l.length;p++){(function(r){var s=c(r);r.click(function(){q.call(s)})})(l[p])}return this};n.push(l);n.series=l;return n};
/* g.radar */

(function(){function b(t,n,l,w,h,u){u=u||{};var d=this,o=[],v=t.set(),q=t.set(),s=t.set(),g,c=t.set(),C=0,y=Math.max.apply(Math,h),z=h.length,k={pointarray:[],path:null};var B={meshwidth:1,strokewidth:2,stroke:"#f90",meshcolor:"#999",helplines:5,circleradius:10,numbers:true,numberscolor:"#fff"};for(var p in u){B[p]=u[p]}u=B;delete B;var m=function(N,L,i,E,D){var J=Math.PI/180,O=Math.cos(-E*J),I=Math.sin(-E*J),M=N+i*O,K=L+i*I,H=N+D*O,F=L+D*I,G={x:M,y:K,path:["M",n,l,"L",M,K].join(","),rest:["M",M,K,"L",H,F].join(",")};return G};for(var x=z;x--;){C+=+h[x]}g=t.circle(n,l,5).attr({stroke:u.meshcolor,fill:u.meshcolor,"stroke-width":u.meshwidth});if(u.helplines){var e=w/u.helplines;for(var x=0;x<u.helplines;x++){c.push(t.circle(n,l,e*(x+1)).attr({stroke:u.meshcolor,"stroke-width":u.meshwidth}))}}for(var x=0;x<z;x++){o[x]=m(n,l,w*h[x]/y,x*360/z,w)}k.pointarray.push("M");for(var x=0;x<z;x++){k.pointarray.push(o[x].x,o[x].y,"L")}k.pointarray.push(o[0].x,o[0].y);k.path=t.path(k.pointarray.join(",")).attr({stroke:u.stroke,"stroke-width":u.meshwidth,fill:u.stroke,"fill-opacity":0.4});for(var x=0;x<z;x++){o[x].path=t.path(o[x].path).attr({stroke:u.stroke,"stroke-width":u.strokewidth});o[x].rest=t.path(o[x].rest).attr({stroke:u.meshcolor,"stroke-width":u.meshwidth});o[x].point=t.circle(o[x].x,o[x].y,u.circleradius).attr({stroke:u.stroke,fill:u.stroke});if(u.numbers){o[x].number=t.text(o[x].x,o[x].y+1,x+1).attr(d.txtattr).attr({fill:u.numberscolor,"text-anchor":"middle"})}var A=t.set();A.push(o[x].path,o[x].rest,o[x].point);if(o[x].number){A.push(o[x].number)}q.push(A);s.push(o[x].point)}v.hover=function(F,D){D=D||function(){};var E=this;for(var r=z;r--;){(function(G,H,i){var I={arm:G.point,number:G.number,cover:H,cx:n,cy:l,mx:G.x,my:G.y,value:h[i],max:y,label:E.labels&&E.labels[i]};I.cover.mouseover(function(){F.call(I)}).mouseout(function(){D.call(I)});if(I.label){I.label.mouseover(function(){F.call(I)}).mouseout(function(){D.call(I)})}})(o[r],q[r],r)}return this};v.each=function(E){if(!Raphael.is(E,"function")){return this}var D=this;for(var r=z;r--;){(function(F,G,i){var H={arm:F.point,number:F.number,cover:G,cx:n,cy:l,x:F.x,y:F.y,value:h[i],max:y,label:D.labels&&D.labels[i]};E.call(H)})(o[r],q[r],r)}return this};v.click=function(E){var D=this;for(var r=z;r--;){(function(F,G,i){var H={arm:F.point,number:F.number,cover:G,cx:n,cy:l,mx:F.x,my:F.y,value:h[i],max:y,label:D.labels&&D.labels[i]};G.click(function(){E.call(H)});if(H.label){H.label.click(function(){E.call(H)})}})(o[r],q[r],r)}return this};var f=function(I,E,D,r){var M=n+w+w/5,L=l,H=L+10;I=I||[];r=(r&&r.toLowerCase&&r.toLowerCase())||"east";D=t[D&&D.toLowerCase()]||"circle";v.labels=t.set();for(var G=0;G<z;G++){var N=s[G].attr("fill"),F;h[G].others&&(I[j]=E||"Others");I[G]=d.labelise(I[G],h[G],C);v.labels.push(t.set());v.labels[G].push(t[D](M+5,H,8).attr({fill:N,stroke:"none"}));v.labels[G].push(F=t.text(M+20,H,I[G]||h[G]).attr(d.txtattr).attr({fill:u.legendcolor||"#000","text-anchor":"start"}));if(u.numbers){v.labels[G].push(t.text(M+5,H+1,G+1).attr(d.txtattr).attr({fill:u.numberscolor,"text-anchor":"middle"}))}q[G].label=v.labels[G];H+=F.getBBox().height*1.2}var J=v.labels.getBBox(),K={east:[0,-J.height/2],west:[-J.width-2*w-20,-J.height/2],north:[-w-J.width/2,-w-J.height-10],south:[-w-J.width/2,w+10]}[r];v.labels.translate.apply(v.labels,K);v.push(v.labels)};if(u.legend){f(u.legend,u.legendothers,u.legendmark,u.legendpos)}v.push(s,q,g,c);v.series=s;v.covers=q;return v}var a=function(){};a.prototype=Raphael.g;b.prototype=new a;Raphael.fn.radarchart=function(c,g,f,d,e){return new b(this,c,g,f,d,e)}})();
/* raphalytics */

(function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,b=function(g,f,h){var e=h;f.replace(a,function(k,j,i,m,l){j=j||m;if(e){if(j in e){e=e[j]}typeof e=="function"&&l&&(e=e())}});e=(e==null||e==h?g:e)+"";return e},d=function(f,e){return String(f).replace(c,function(h,g){return b(h,g,e)})};Raphael.fn.raphalytics_popup=function(f,e,p,j,B){j=String(j||"top-middle").split("-");j[1]=j[1]||"middle";var q=5,g=p.getBBox(),n=Math.round(g.width),A=Math.round(g.height),l=Math.round(g.x)-q,k=Math.round(g.y)-q,s=Math.min(A/2,n/2,10),u={top:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}l-{right},0-{gap},{gap}-{gap}-{gap}-{left},0a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",bottom:"M{x},{y}l{left},0,{gap}-{gap},{gap},{gap},{right},0a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",right:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}l0-{bottom}-{gap}-{gap},{gap}-{gap},0-{top}a{r},{r},0,0,1,{r}-{r}z",left:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}l0,{top},{gap},{gap}-{gap},{gap},0,{bottom}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z"},i={hx0:f-(l+q+n-s*2),hx1:f-(l+q+n/2-s),hx2:f-(l+q+s),vhy:e-(k+q+A+q+s),"^hy":e-(k-s)},z=[{x:l+q,y:k,w:n,w4:n/4,h4:A/4,right:0,left:n-s*2,bottom:0,top:A-s*2,r:q,h:A,gap:s},{x:l+q,y:k,w:n,w4:n/4,h4:A/4,left:n/2-s,right:n/2-s,top:A/2-s,bottom:A/2-s,r:q,h:A,gap:s},{x:l+q,y:k,w:n,w4:n/4,h4:A/4,left:0,right:n-s*2,top:0,bottom:A-s*2,r:q,h:A,gap:s}][j[1]=="middle"?1:(j[1]=="top"||j[1]=="left")*2];var o=0,m=0,v=this.path(d(u[j[0]],z)).insertBefore(p);switch(j[0]){case"top":o=f-(l+q+z.left+s);m=e-(k+q+A+q+s);break;case"bottom":o=f-(l+q+z.left+s);m=e-(k-s);break;case"left":o=f-(l+q+n+q+s);m=e-(k+q+z.top+s);break;case"right":o=f-(l-s);m=e-(k+q+z.top+s);break}v.translate(o,m);if(B){B=v.attr("path");v.remove();return{path:B,dx:o,dy:m}}p.translate(o,m);return v}})();Raphael.fn.drawGridBorder=function(a,g,b,e,d,c){if(d=="full"){var f=["M",Math.round(a),Math.round(g),"L",Math.round(a+b),Math.round(g),Math.round(a+b),Math.round(g+e),Math.round(a),Math.round(g+e),Math.round(a),Math.round(g)]}if(d=="xoy"){var f=["M",Math.round(a),Math.round(g+e),"L",Math.round(a+b),Math.round(g+e),"M",Math.round(a),Math.round(g+e),"L",Math.round(a),Math.round(g)]}if(d=="minimalist"){var f=["M",Math.round(a),Math.round(g+e),"L",Math.round(a+b),Math.round(g+e)]}return this.path(f.join(",")).attr({stroke:c,"stroke-width":0.5})};Raphael.fn.drawGrid=function(m,l,n,g,f,k,j,d){var o=[],a=g/k,c=n/f;if(j=="y_grid"||j=="full_grid"||j=="minimalist"){var b=(j=="minimalist"?0:1);for(var e=b;e<k;e++){o=o.concat(["M",Math.round(m),Math.round(l+e*a),"H",Math.round(m+n)])}}if(j=="x_grid"||j=="full_grid"){for(e=1;e<f;e++){o=o.concat(["M",Math.round(m+e*c),Math.round(l),"V",Math.round(l+g)])}}return this.path(o.join(",")).attr({stroke:d,"stroke-width":0.5})};function raphalytics(e,ao,v,ac,H){function ab(j,i,ay,aw,Y,X){var x=(ay-j)/2,p=(Y-ay)/2,az=Math.atan((ay-j)/Math.abs(aw-i)),ax=Math.atan((Y-ay)/Math.abs(aw-X));az=i<aw?Math.PI-az:az;ax=X<aw?Math.PI-ax:ax;var y=Math.PI/2-((az+ax)%(Math.PI*2))/2,aB=x*Math.sin(y+az),av=x*Math.cos(y+az),aA=p*Math.sin(y+ax),au=p*Math.cos(y+ax);return{x1:ay-aB,y1:aw+av,x2:ay+aA,y2:aw+au}}if(typeof ao[0]!=="object"){ao=[ao]}if(typeof ac[0]!=="object"){ac=[ac]}var l=Math.max.apply(Math,ao[0]);for(al=0,R=ao.length;al<R;al++){if(Math.max.apply(Math,ao[al])>l){l=Math.max.apply(Math,ao[al])}}var c=H.width||750,f=H.height||150,am=H.leftgutter||10,an=H.bottomgutter||16,N=H.topgutter||14,k=H.rightgutter||10,ai=H.normalize||true,z=H.smooth||false,B=H.fill||false,o=H.gridtype||"minimalist",u=H.gridcolor||"#ccc",d=H.gridbordertype||(o=="minimalist"?"minimalist":"full"),J=H.gridbordercolor||(o=="minimalist"?"#000":"#ccc"),K=H.color||"#2F69BF",V=H.tooltipcolor||"#000",E=H.tooltipbordercolor||"#666",S=H.tooltiptextcolor||"#fff",aq=H.labelcolor||"#000",w=H.y_labels_number||2,ap=H.y_label_0||false,ag=H.y_labels_position||"inside",r={font:"12px Helvetica, Arial",fill:"#fff"};if(l<w){l=w}if(ai){l=Math.ceil(4*l/3);if(l>10){var M=Math.pow(10,l.toString().length-1);l=Math.ceil(l/M)*M}}if(ag=="outside"&&am<l.toString().length*8){am=l.toString().length*8}var h=(c-am-k)/(v.length-1),g=(f-an-N)/l;e.drawGridBorder(am,N,c-am-k,f-N-an,d,J);e.drawGrid(am,N,c-am-k,f-N-an,v.length-1,w,o,u);if(typeof K!="object"){K=[K]}var ad,ah,af=e.set(),I=0,G=0,m=false,b=e.set(),ae,P,L,s;af.push(e.text(60,12,ac[0][0]).attr(r).attr({fill:S}));af.hide();e.frame=e.raphalytics_popup(100,100,af,"right").attr({fill:V,stroke:E,"stroke-width":2,"fill-opacity":0.7}).hide();for(var ak=0,A=ao.length;ak<A;ak++){if(typeof K[ak]=="undefined"){s=K[K.length-1]}else{s=K[ak]}ad=e.path().attr({stroke:s,"stroke-width":4,"stroke-linejoin":"round"});if(B){ah=e.path().attr({stroke:"none",opacity:0.3,fill:s})}ae=null;P=null;for(var al=0,R=v.length;al<R;al++){var T=Math.round(f-an-g*ao[ak][al]),U=Math.round(am+h*al);if(!al){if(z){ae=["M",U,T,"C",U,T]}else{ae=["M",U,T,"L",U,T]}if(B){if(z){P=["M",am,f-an,"L",U,T,"C",U,T]}else{P=["M",am,f-an,"L",U,T,"L",U,T]}}}if(al&&al<R-1){var F=Math.round(f-an-g*ao[ak][al-1]),aa=Math.round(am+h*al),D=Math.round(f-an-g*ao[ak][al+1]),W=Math.round(am+h*(al+1));var at=ab(aa,F,U,T,W,D);if(z){ae=ae.concat([at.x1,at.y1,U,T,at.x2,at.y2])}else{ae=ae.concat([U,T])}if(B){if(z){P=P.concat([at.x1,at.y1,U,T,at.x2,at.y2])}else{P=P.concat([U,T])}}}var ar=e.circle(U,T,4).attr({fill:s,stroke:s,"stroke-width":2});if(typeof ac[ak]=="object"&&typeof ac[ak][al]!="undefined"&&ac[ak][al]!=false){b.push(e.rect(U-10,T-10,20,20).attr({stroke:"none",fill:"#fff",opacity:0}));var O=b[b.length-1];(function(j,a,aw,au,Y,p){var av,X=0;O.hover(function(){clearTimeout(L);var x="right";if(a+e.frame.getBBox().width>c){x="left"}var i=e.raphalytics_popup(a,aw,af,x,1),y=Raphael.animation({path:i.path,transform:["t",i.dx,i.dy]},200*m);I=af[0].transform()[0][1]+i.dx;G=af[0].transform()[0][2]+i.dy;e.frame.show().stop().animate(y);af[0].attr({text:Y}).show().stop().animateWith(e.frame,y,{transform:["t",I,G]},200*m);p.attr("r",6);m=true},function(){p.attr("r",4);L=setTimeout(function(){e.frame.hide();af[0].hide();m=false},1000)})})(ak,U,T,ao[ak][al],ac[ak][al],ar)}}if(z){ae=ae.concat([U,T,U,T])}else{ae=ae.concat([U,T])}ad.attr({path:ae});if(B){if(z){P=P.concat([U,T,U,T,"L",U,f-an,"z"])}else{P=P.concat([U,T,U,f-an,"z"])}ah.attr({path:P})}}var C=(ap?0:1);var Z=0;var Q=(ag=="outside"?"end":"start");for(al=C;al<=w;al++){Z=Math.round(al*l/w);Z=Z.toString();var q=(ag=="outside"?am-1:am+1);var n=(ag=="outside"?f-an-al*Math.round((f-N-an)/w):(al==0?f-an-al*Math.round((f-N-an)/w)-8:f-an-al*Math.round((f-N-an)/w)+8));e.text(q,n,Z).attr(r).attr({fill:"white",stroke:"#fff","stroke-width":2,"text-anchor":Q}).toFront();e.text(q,n,Z).attr(r).attr({fill:aq,"text-anchor":Q}).toFront()}for(var al=0,R=v.length;al<R;al++){if(v[al]){var U=Math.round(am+h*al),aj=(al==0?"start":(al==R-1?"end":"middle"));t=e.text(U,f-6,v[al]).attr(r).attr({fill:aq,"text-anchor":aj}).toBack()}}e.frame.toFront();af[0].toFront();b.toFront()}Raphael.fn.raphalytics=function(c,d,b,a){return new raphalytics(this,c,d,b,a)};
/* orgchart */

function oc_render(){oc_calc();oc_draw()}if(navigator.appName=="Microsoft Internet Explorer"){var oc_IE=1}else{var oc_IE=0}var oc_max_text_width=0;var oc_max_text_height=0;var oc_max_title_lines=0;var oc_max_subtitle_lines=0;var oc_paper=null;function oc_clone(b){var a=(b instanceof Array)?[]:{};for(i in b){if(b[i]&&typeof b[i]=="object"){a[i]=oc_clone(b[i])}else{a[i]=b[i]}}return a}function oc_add2point(a,b){a[0]+=b[0];a[1]+=b[1]}function oc_repeat_str(d,c){var a="";for(var b=0;b<c-1;b++){a+=d}return a}function oc_calc(){oc_text_limit(oc_data.root);oc_delete_special_chars(oc_data.root);oc_text_dimensions(oc_data.root);oc_data.root.is_root=true;oc_boundboxes_dimensions(oc_data.root)}function oc_text_limit(b){if(oc_style.max_text_width==0){return}b.title=oc_text_limit_obj(b.title);b.subtitle=oc_text_limit_obj(b.subtitle);if(b.children===undefined){return}for(var a=0;a<b.children.length-(oc_IE);a++){oc_text_limit(b.children[a])}}function oc_text_limit_obj(g){if(g==undefined){return undefined}var f=g.split(/[ \n]+/);var b=[];var e="";var c="";for(var d=0;d<f.length-(0);d++){var c=e;e+=(d==0?"":" ")+f[d];if(e.length>oc_style.max_text_width){b.push(c);e=f[d]}}if(e!=""){b.push(e)}var a=b.join("\n");return a}function oc_delete_special_chars(b){b.title=oc_delete_special_chars_obj(b.title);b.subtitle=oc_delete_special_chars_obj(b.subtitle);if(b.children===undefined){return}for(var a=0;a<b.children.length-(oc_IE);a++){oc_delete_special_chars(b.children[a])}}function oc_delete_special_chars_obj(a){if(a===undefined){return undefined}a=a.replace(/á/g,"a");a=a.replace(/é/g,"e");a=a.replace(/í/g,"i");a=a.replace(/ó/g,"o");a=a.replace(/ú/g,"u");a=a.replace(/Á/g,"A");a=a.replace(/É/g,"E");a=a.replace(/Í/g,"I");a=a.replace(/Ó/g,"O");a=a.replace(/Ú/g,"U");a=a.replace(/ñ/g,"n");a=a.replace(/Ñ/g,"N");return a}function oc_text_dimensions(d){var a=[0,0];var c=[0,0];d.title_lines=d.subtitle_lines=0;a=oc_text_dimensions_obj(d.title,oc_style.title_char_size);d.title_lines=a[2];if(d.title_lines>oc_max_title_lines){oc_max_title_lines=d.title_lines}if(d.subtitle!==undefined){c=oc_text_dimensions_obj(d.subtitle,oc_style.subtitle_char_size);d.subtitle_lines=c[2];if(d.subtitle_lines>oc_max_subtitle_lines){oc_max_subtitle_lines=d.subtitle_lines}}if(a[0]>oc_max_text_width){oc_max_text_width=a[0]}if(oc_style.use_images&&oc_style.images_size[0]>oc_max_text_width){oc_max_text_width=oc_style.images_size[0]}if(c[0]>oc_max_text_width){oc_max_text_width=c[0]}if(a[1]+c[1]>oc_max_text_height){oc_max_text_height=a[1]+c[1]}if(d.children===undefined){return}for(var b=0;b<d.children.length-(oc_IE);b++){oc_text_dimensions(d.children[b])}}function oc_text_dimensions_obj(e,c){var b=0;var d=e.split("\n");if(d.length==0){return[0,0]}for(var a=0;a<d.length-(0);a++){if(d[a].length>b){b=d[a].length}}return[b*c[0],(d.length-(0))*c[1],d.length-(0)]}function oc_boundboxes_dimensions(l){if(l.type===undefined){l.type="subordinate"}l.deltacorner=[0,0];var q=0;var d=0;if(l.children!==undefined){for(var n=0;n<l.children.length-(oc_IE);n++){var f=l.children[n];if(f.type=="staff"){f.position=(q++%2==0?"left":"right")}else{if(f.type=="collateral"){f.position=(d++%2==0?"left":"right")}}oc_boundboxes_dimensions(f)}}l.boundbox=[oc_max_text_width+2*oc_style.inner_padding,oc_max_text_height+2*oc_style.inner_padding];if(oc_style.use_images&&l.image!==undefined){l.boundbox[1]+=oc_style.inner_padding*1+oc_style.images_size[1]}var h=l.boundbox[1];if(l.is_root!==undefined){oc_add2point(l.boundbox,[2*oc_style.hline,2*oc_style.vline]);l.deltacenter=[l.boundbox[0]/2,h/2+2*oc_style.vline]}else{if(l.type=="collateral"){oc_add2point(l.boundbox,[2*oc_style.hline,2*oc_style.vline]);l.deltacenter=[l.boundbox[0]/2,h/2+2*oc_style.vline]}else{if(l.type=="staff"){oc_add2point(l.boundbox,[2*oc_style.hline,1*oc_style.vline]);l.deltacenter=[l.boundbox[0]/2,h/2+1*oc_style.vline]}else{oc_add2point(l.boundbox,[2*oc_style.hline,2*oc_style.vline]);l.deltacenter=[l.boundbox[0]/2,h/2+2*oc_style.vline]}}}l.fullbbox=oc_clone(l.boundbox);if(l.children===undefined){l.xoffset=0}var p=l.boundbox[0]/2;var u=l.boundbox[0]/2;var e=0;if(l.children!==undefined){for(var n=0;n<l.children.length-(oc_IE);n++){var f=l.children[n];if(f.type!="collateral"){continue}e++;if(f.position=="left"){p=f.fullbbox[0]+l.boundbox[0]/2}else{u=f.fullbbox[0]+l.boundbox[0]/2}}}var b=0;var r=0;var o=0;var c=0;var g=0;var m=0;if(l.children!==undefined){for(var n=0;n<l.children.length-(oc_IE);n++){var f=l.children[n];if(f.type!="staff"){continue}m++;if(f.position=="left"){b+=f.fullbbox[1];r=f.fullbbox[1];if(c<f.fullbbox[0]){c=f.fullbbox[0]}}else{r=f.fullbbox[1];if(f.fullbbox[1]>r){b+=f.fullbbox[1]-r}if(g<f.fullbbox[0]){g=f.fullbbox[0]}}}}var s=0;if(l.children!==undefined){for(var n=0;n<l.children.length-(oc_IE);n++){var f=l.children[n];if(f.type!="subordinate"){continue}s+=f.fullbbox[0]}}var t=0;if(p>t){t=p}if(c>t){t=c}if(s/2>t){t=s/2}var k=0;if(u>k){k=u}if(g>k){k=g}if(s/2>k){k=s/2}l.xoffset=t-l.boundbox[0]/2;if(l.children!==undefined){for(var n=0;n<l.children.length-(oc_IE);n++){var f=l.children[n];if(f.type!="collateral"){continue}if(f.position=="left"){f.deltacorner=[t-l.boundbox[0]/2-f.fullbbox[0],0]}else{f.deltacorner=[t+l.boundbox[0]/2,0]}oc_update_fullbbox(l,f)}}b=0;r=0;o=0;if(l.children!==undefined){for(var n=0;n<l.children.length-(oc_IE);n++){var f=l.children[n];if(f.type!="staff"){continue}if(f.position=="left"){f.deltacorner=[t-f.fullbbox[0],l.boundbox[1]+b];b+=f.fullbbox[1];r=f.fullbbox[1];if(m==1){l.fullbbox[0]+=l.boundbox[0]}}else{f.deltacorner=[t,l.boundbox[1]+o];r=f.fullbbox[1];if(f.fullbbox[1]>r){b+=f.fullbbox[1]-r}}oc_update_fullbbox(l,f)}}var j=0;var a=t-s/2;if(a<0){a=0}if(l.children!==undefined){for(var n=0;n<l.children.length-(oc_IE);n++){var f=l.children[n];if(f.type!="subordinate"){continue}f.deltacorner=[a+j,l.boundbox[1]+b];j+=f.fullbbox[0]}for(var n=0;n<l.children.length-(oc_IE);n++){var f=l.children[n];if(f.type!="subordinate"){continue}oc_update_fullbbox(l,f)}}if(OC_DEBUG){if(l.children!==undefined){for(var n=0;n<l.children.length-(oc_IE);n++){var f=l.children[n];console.log("oc_boundboxes_dimensions ["+f.title+"] boundbox("+f.boundbox[0]+","+f.boundbox[1]+") deltacenter("+f.deltacenter[0]+","+f.deltacenter[1]+") fullbbox("+f.fullbbox[0]+","+f.fullbbox[1]+") deltacorner("+f.deltacorner[0]+","+f.deltacorner[1]+") xoffset("+f.xoffset+")")}}}}function oc_update_fullbbox(e,f){var b=0,d=0,a=e.fullbbox[0],c=e.fullbbox[1];if(f.deltacorner[0]<b){b=f.deltacorner[0]}if(f.deltacorner[0]+f.fullbbox[0]>a){a=f.deltacorner[0]+f.fullbbox[0]}if(f.deltacorner[1]+f.fullbbox[1]>c){c=f.deltacorner[1]+f.fullbbox[1]}if(b<e.deltacorner[0]){e.deltacorner[0]=b}if(OC_DEBUG){console.log("updatefullbbox "+e.title+" <-- "+f.title+" x0="+b+" x1="+a+" y0="+d+" y1="+c)}e.fullbbox=[a-b,c-d]}function oc_draw(){oc_paper=new Raphael(document.getElementById(oc_style.container),oc_data.root.fullbbox[0],oc_data.root.fullbbox[1]);oc_draw_obj(oc_data.root,null,0,0)}function oc_draw_obj(t,k,p,o){if(t.children!==undefined){for(var x=0;x<t.children.length-(oc_IE);x++){oc_draw_obj(t.children[x],t,t.deltacorner[0]+p,t.deltacorner[1]+o)}}if(OC_DEBUG){console.log("drawing "+t.title+": legacyXoff="+p+" legacyYoff="+o+" dcornerX="+t.deltacorner[0]+" dcornerY="+t.deltacorner[1]+" dcenterX="+t.deltacenter[0]+" dcenterY="+t.deltacenter[1]+" xoff="+t.xoffset)}var v=p+t.deltacorner[0]+t.deltacenter[0]+t.xoffset;var c=o+t.deltacorner[1]+t.deltacenter[1];var B=v-oc_max_text_width/2-oc_style.inner_padding;var A=v+oc_max_text_width/2+oc_style.inner_padding;if(oc_style.use_images&&t.image!==undefined){var g=c-oc_max_text_height/2-oc_style.inner_padding-oc_style.images_size[1]/2-oc_style.inner_padding/2;var f=c+oc_max_text_height/2+oc_style.inner_padding+oc_style.images_size[1]/2+oc_style.inner_padding/2}else{var g=c-oc_max_text_height/2-oc_style.inner_padding;var f=c+oc_max_text_height/2+oc_style.inner_padding}var m=oc_paper.rect(B,g,A-B,f-g);m.attr("fill",oc_style.box_color);m.attr("stroke",oc_style.box_border_color);if(t.id!==undefined){m.oc_id=t.id}m.hover(function(D){this.attr({fill:oc_style.box_color_hover})},function(D){this.attr({fill:oc_style.box_color})});if(oc_style.box_click_handler!==null){m.click(function(D){oc_style.box_click_handler(D,m)})}var s=g+oc_style.inner_padding+t.title_lines*oc_style.title_char_size[1]/2+(oc_max_title_lines-t.title_lines)*oc_style.title_char_size[1]/2-2;var C=oc_paper.text(v,s,t.title);C.attr("font-family",oc_style.text_font);C.attr("font-size",oc_style.title_font_size);C.attr("fill",oc_style.title_color);if(t.subtitle!==undefined){var b=f-oc_style.inner_padding-t.subtitle_lines*oc_style.subtitle_char_size[1]/2;var h=oc_paper.text(v,b,t.subtitle);h.attr("font-family",oc_style.text_font);h.attr("font-size",oc_style.subtitle_font_size);h.attr("fill",oc_style.subtitle_color)}if(oc_style.use_images&&t.image!==undefined){var q=oc_paper.image(oc_style.images_base_url+t.image,v-oc_style.images_size[0]/2,f-oc_style.images_size[1]-oc_style.inner_padding,oc_style.images_size[0],oc_style.images_size[1])}if(k!=null){var u=v-t.xoffset-t.deltacorner[0]+k.xoffset+(0-0);var a=c-0-t.deltacorner[1]+0+(k.deltacenter[1]-t.deltacenter[1]);var y=u-oc_max_text_width/2-oc_style.inner_padding;var w=u+oc_max_text_width/2+oc_style.inner_padding;var e=a-oc_max_text_height/2-oc_style.inner_padding;var d=a+oc_max_text_height/2+oc_style.inner_padding;var n,l;if(t.type=="collateral"){if(t.position=="left"){var r="M "+A+" "+c+" l "+(2*oc_style.hline)+" 0";n=oc_paper.path(r);l=oc_paper.path(r)}else{var r="M "+B+" "+c+" l -"+(2*oc_style.hline)+" 0";n=oc_paper.path(r);l=oc_paper.path(r)}}else{if(t.type=="staff"){if(t.position=="left"){var r="M "+A+" "+c+" h "+(u-A)+" v "+(a-c);n=oc_paper.path(r);l=oc_paper.path(r)}else{var r="M "+B+" "+c+" h "+(u-B)+" v "+(a-c);n=oc_paper.path(r);l=oc_paper.path(r)}}else{if(t.is_root===undefined){var r="M "+v+" "+g+" v -"+oc_style.vline+" h "+(u-v)+" V "+d;n=oc_paper.path(r);l=oc_paper.path(r)}}}n.attr("stroke",oc_style.line_color);l.attr("stroke",oc_style.line_color)}if(OC_DEBUG){B=p+t.deltacorner[0]+t.xoffset;A=p+t.deltacorner[0]+t.xoffset+t.boundbox[0];g=o+t.deltacorner[1];f=o+t.deltacorner[1]+t.boundbox[1];var j=oc_paper.rect(B+4,g+4,A-B-8,f-g-6);j.attr({stroke:"#00f","stroke-width":0.4});B=p+t.deltacorner[0];A=p+t.deltacorner[0]+t.fullbbox[0];g=o+t.deltacorner[1];f=o+t.deltacorner[1]+t.fullbbox[1];var z=oc_paper.rect(B+2,g+2,A-B-4,f-g-2);z.attr({stroke:"#f00","stroke-width":0.4})}};
/* donut */

Raphael.fn.donutChart=function(h,g,a,k,p,l,s){var d=this,n=Math.PI/180,m=this.set();function f(C,A,t,D,z,B){var w=C+t*Math.cos(-D*n),v=C+t*Math.cos(-z*n),F=A+t*Math.sin(-D*n),E=A+t*Math.sin(-z*n),y=C+k*Math.cos(-D*n),x=C+k*Math.cos(-z*n),u=A+k*Math.sin(-D*n),i=A+k*Math.sin(-z*n);return d.path(["M",y,u,"L",w,F,"A",t,t,0,+(z-D>180),0,v,E,"L",x,i,"A",k,k,0,+(z-D>180),1,y,u,"z"]).attr(B)}var e=0,o=0,c=0,b=function(u){var x=p[u],A=360*x/o,y=e+(A/2),t=Raphael.hsb(c,0.75,1),i=500,z=30,w=Raphael.hsb(c,1,1),r=f(h,g,a,e,e+A,{fill:"90-"+w+"-"+t,stroke:s,"stroke-width":3}),v=d.text(h+(a+z+55)*Math.cos(-y*n),g+(a+z+25)*Math.sin(-y*n),l[u]).attr({fill:w,stroke:"none",opacity:0,"font-size":20});r.mouseover(function(){r.stop().animate({transform:"s1.1 1.1 "+h+" "+g},i,"elastic");v.stop().animate({opacity:1},i,"elastic")}).mouseout(function(){r.stop().animate({transform:""},i,"elastic");v.stop().animate({opacity:0},i)});e+=A;m.push(r);m.push(v);c+=0.1};for(var j=0,q=p.length;j<q;j++){o+=p[j]}for(j=0;j<q;j++){b(j)}return m};
/* coxcomb */

/*!
 * Copyright (c) 2012 Guillermo Winkler
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
(function(){var b=0;var a=Math.PI/180;function e(i,n,k,h,o,j,m){var s=o+(j-o)/2,l=n+h*Math.cos(-s*a),p=k+h*Math.sin(-s*a),q=i.text(l,p,m.text).attr({fill:m.fontColor,"font-size":m.fontSize});if(s>=90&&s<270){s+=180}q.transform("r"+(-s)+","+l+","+p);return q}function d(k,o,m,h,p,l,n){var j=o+h*Math.cos(-p*a),i=o+h*Math.cos(-l*a),s=m+h*Math.sin(-p*a),q=m+h*Math.sin(-l*a);var t=k.path(["M",o,m,"L",j,s,"A",h,h,0,+(l-p>180),0,i,q,"z"]).attr(n);e(k,o,m,h/2,p,l,n);return t}function f(q,m,k,y,x,w,u,C){var B=m+y*Math.cos(-w*a),l=k+y*Math.sin(-w*a),A=m+x*Math.cos(-w*a),j=k+x*Math.sin(-w*a),z=m+x*Math.cos(-u*a),i=k+x*Math.sin(-u*a),v=m+y*Math.cos(-u*a),h=k+y*Math.sin(-u*a);var r=q.path(["M",B,l,"L",A,j,"A",x,x,0,+(u-w>180),0,z,i,"L",v,h,"A",y,y,0,+(u-w>180),0,B,l,"z"]).attr(C);var p=e(q,m,k,(y+x)/2,w,u,C);var o=q.set();o.push(r,p);var n=function(){if(typeof(C.onClick)==="function"){o.toFront();C.onClick(r,C.text)}};var t=function(){r.attr({"fill-opacity":0.2})};var s=function(){r.attr({"fill-opacity":C["fill-opacity"]||1})};o.mouseover(t).mouseout(s).click(n);return o}function c(i,h,j){if(j.colors){if(j.colors.byCategory&&j.colors.byCategory[i]){return j.colors.byCategory[i]}if(j.colors.bySeries&&j.colors.bySeries[h]){return j.colors.bySeries[h]}}b+=1;return{color:Raphael.hsb(b,1,1)}}function g(n,i,h,u,m,p){var s=n.set();var q=0;var z={};var A;var k,v;for(k in m.data){if(m.data.hasOwnProperty(k)){q+=1;if(typeof(m.data[k])==="object"){z[k]=0;for(v in m.data[k]){if(m.data[k].hasOwnProperty(v)){z[k]+=1;if(!A||A<m.data[k][v]){A=m.data[k][v]}}}}}}var l=(p&&p.categorySize)||0.3;var t=0;var j=u*l;var o=360*(1/q);for(k in m.data){if(typeof(m.data[k])==="object"){d(n,i,h,j,t,t+o,{fill:m.colors.category,"fill-opacity":m.colors.opacity,text:k,fontSize:p.categoryFontSize,fontColor:m.colors.fontColor,stroke:p.stroke,"stroke-width":3});for(v in m.data[k]){var y=j+(u*(1-l)*(m.data[k][v]/A));var x=o/z[k];var w=c(k,v,m);f(n,i,h,j,y,t,t+x,{fill:w.color,stroke:p.stroke,hoverColor:w.hover,fontSize:p.seriesFontSize,fontColor:w.fontColor,text:v,"fill-opacity":w.opacity,"stroke-width":3,onClick:p.onClick});t+=x}}}}Raphael.fn.coxCombChart=function(h,l,j,k,i){return new g(this,h,l,j,k,i)}}());